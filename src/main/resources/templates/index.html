<!DOCTYPE html>
<html
    xmlns:th="http://www.thymeleaf.org"
    xmlns="http://www.w3.org/1999/xhtml"
    class="no-js"
    lang="en"
    >
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Administrar Menú</title>
        <link rel="stylesheet" th:href="@{/assets/css/admin_menu_styles.css}" />
        <link rel="stylesheet" th:href="@{/assets/css/modal_admin.css}" />
    </head>

    <body>
        <div class="header">
            <h1>Administrar Menú</h1>
            <button class="logout-button" onclick="logout()">Salir</button>
        </div>

        <div class="admin-menu-container">
            <div class="admin-menu">
                <h2>
                    Elementos del Menú
                    <button class="add-button" onclick="openAddModal()">Agregar</button>
                </h2>

                <!-- Títulos de las categorías -->
                <div class="menu-titles">
                    <button class="menu-title" onclick="toggleCategory('todos')">
                        Todos
                    </button>
                    <button class="menu-title" onclick="toggleCategory('bebidas')">
                        Bebidas
                    </button>
                    <button class="menu-title" onclick="toggleCategory('comida')">
                        Comida
                    </button>
                </div>

                <!-- Sección Todos -->
                <div class="category" id="todos">
                    <div class="menu-item"  th:each="pP : ${productosGenerales}">
                        <span th:text="${pP.getNombre()}"> </span>
                        <div class="button-container">
                            <button class="edit-button" onclick="openEditModal('Producto 1')">
                                Editar
                            </button>
                            <button
                                class="delete-button"
                                onclick="confirmDelete('Producto 1')"
                                >
                                Eliminar
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Sección Bebidas -->
                <div class="category" id="bebidas">
                    <div class="menu-item"  th:each="pP : ${prodBebidas}">
                        <span th:text="${pP.getNombre()}"> </span>
                        <div class="button-container">
                            <button class="edit-button" onclick="openEditModal('Producto 1')">
                                Editar
                            </button>
                            <button
                                class="delete-button"
                                onclick="confirmDelete('Producto 1')"
                                >
                                Eliminar
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Sección Comida -->
                <div class="category" id="comida">
                    <div class="menu-item"  th:each="pP : ${prodComida}">
                        <span th:text="${pP.getNombre()}"> </span>
                        <div class="button-container">
                            <button class="edit-button" onclick="openEditModal('Producto 1')">
                                Editar
                            </button>
                            <button
                                class="delete-button"
                                onclick="confirmDelete('Producto 1')"
                                >
                                Eliminar
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal para agregar producto -->
        <div id="addModal" class="modal">
            <div class="modal-content">
                <h2>Agregar Producto</h2>
                <div class="modal-separator"></div>
                <div class="product-list">
                    <form id="agregarProductp" method="post">
                        <label for="add-product-name">Nombre del Producto:</label>
                        <input type="text" id="add-product-name" name="add-product-name" />

                        <label for="add-product-description">Descripción del Producto:</label>
                        <textarea
                            id="add-product-description"
                            name="add-product-description"
                            rows="3"
                            placeholder="Ingrese una descripción..."
                            ></textarea>

                        <label for="add-product-price">Precio del Producto:</label>
                        <input
                            type="text"
                            id="add-product-price"
                            name="add-product-price"
                            placeholder="Ejemplo: 99.99"
                            />

                        <label for="add-product-type">Tipo de Producto:</label>
                        <select id="add-product-type" name="add-product-type">
                            <option value="" disabled="" selected="">-- Selecciona una opcion --</option>
                            <option th:each="pp : ${tipoProd}" th:value="${pp.getCatTipoProd()}"
                                    th:text="${ pp.getDescripcion()}"></option>
                        </select>

                        <label for="add-product-status">Estado del Producto:</label>
                        <select id="add-product-status" name="add-product-status">
                            <option value="" disabled="" selected="">-- Selecciona una opcion --</option>
                            <option th:each="pp : ${estProd}" th:value="${pp.getCatEstId()}"
                                    th:text="${ pp.getDescripcion()}"></option>
                        </select>
                    </form>
                </div>
                <div class="modal-buttons">
                    <button class="save-button" onclick="saveAddModal()">Guardar</button>
                    <button class="close-button" onclick="closeModal('addModal')">
                        Cerrar
                    </button>
                </div>
            </div>
        </div>

        <!-- Modal para editar producto -->
        <div id="editModal" class="modal">
            <div class="modal-content">
                <h2>Editar Producto</h2>
                <div class="modal-separator"></div>
                <div class="product-list">
                    <form id="editarProducto" method="post">
                        <label for="edit-product-name">Nombre del Producto:</label>
                        <input type="text" id="edit-product-name" name="edit-product-name" />

                        <label for="edit-product-description"
                               >Descripción del Producto:</label
                        >
                        <textarea
                            id="edit-product-description"
                            name="edit-product-description"
                            rows="3"
                            ></textarea>

                        <label for="edit-product-price">Precio del Producto:</label>
                        <input
                            type="text"
                            id="edit-product-price"
                            name="edit-product-price"
                            />

                        <label for="edit-product-type">Tipo de Producto:</label>
                        <select id="edit-product-type" name="edit-product-type">
                            <option value="" disabled="" selected="">-- Selecciona una opcion --</option>
                            <option th:each="pp : ${tipoProd}" th:value="${pp.getCatTipoProd()}"
                                    th:text="${ pp.getDescripcion()}"></option>
                        </select>

                        <label for="edit-product-status">Estado del Producto:</label>
                        <select id="edit-product-status" name="edit-product-status">
                            <option value="" disabled="" selected="">-- Selecciona una opcion --</option>
                            <option th:each="pp : ${estProd}" th:value="${pp.getCatEstId()}"
                                    th:text="${ pp.getDescripcion()}"></option>
                        </select>
                    </form>
                </div>
                <div class="modal-buttons">
                    <button class="save-button" onclick="saveEditModal()">
                        Guardar Cambios
                    </button>
                    <button class="close-button" onclick="closeModal('editModal')">
                        Cerrar
                    </button>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>© 2024 Sistema de Menú - Todos los derechos reservados.</p>
        </div>

        <script>
            // Mostrar categorías
            function toggleCategory(category) {
                const categories = document.querySelectorAll(".category");
                categories.forEach((cat) => (cat.style.display = "none"));
                document.getElementById(category).style.display = "block";
            }

            // Mostrar todos los productos por defecto
            window.onload = function () {
                toggleCategory("todos");
            };

            // Abrir modal de agregar
            function openAddModal() {
                document.getElementById("addModal").style.display = "block";
            }

            // Abrir modal de editar
            function openEditModal(productName) {
                document.getElementById("editModal").style.display = "block";
                document.getElementById("edit-product-name").value = productName;
            }

            // Cerrar modal
            function closeModal(modalId) {
                document.getElementById(modalId).style.display = "none";
            }

            // Guardar nuevo producto
            function saveAddModal() {
                const productName = document.getElementById("add-product-name").value;
                alert(`Producto agregado correctamente: ${productName}`);
                closeModal("addModal");
            }

            // Guardar cambios en producto
            function saveEditModal() {
                const productName = document.getElementById("edit-product-name").value;
                alert(`Producto actualizado correctamente: ${productName}`);
                closeModal("editModal");
            }

            // Confirmar eliminación
            function confirmDelete(productName) {
                if (
                        confirm(
                                `¿Estás seguro de que deseas eliminar el producto: ${productName}?`
                                )
                        ) {
                    alert(`El producto "${productName}" ha sido eliminado.`);
                }
            }
        </script>

        <script>
            function logout() {
                // Crear un formulario dinámico para hacer el POST Salir
                var form = document.createElement('form');
                form.method = 'POST';
                form.action = '/logout';

                // Enviar el formulario de manera automática
                document.body.appendChild(form);
                form.submit();
            }
        </script>
    </body>
</html>
